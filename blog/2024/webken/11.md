---
title: "【第11回】React入門(1)"
description: "Webサイトのフロントエンドを作るためのライブラリであるReactについて学びます。"
date: "2024-12-09"
authors: ["batora9"]
tags: ["Web研究会", "React", "JavaScript", "フロントエンド"]
prev: "./10"
---

## Reactとは

Reactは、2013年にMeta(旧Facebook)によって開発・公開されたJavaScriptライブラリです。

Reactでは、UI(ユーザーインターフェース)をコンポーネントと呼ばれる部品を組み合わせて構築することができます。

## プロジェクトの作成

Reactのプロジェクトを作成してみましょう。

以下のコマンドを実行して、Reactのプロジェクトを作成します。

> 事前にnpmをインストールしておく必要があります

```bash
npx create-vite first-react-app
```

以下のような画面が表示されるので、`React`を選択します。

![フレームワークの選択](/image/blog/2024/webken-11/select-framework.png)

次に、`JavaScript`を選択します。

![言語の選択](/image/blog/2024/webken-11/select-variant.png)

これで、`first-react-app`という名前のReactのプロジェクトが作成されました。

パッケージをインストールするため、以下のコマンドを実行します。

```bash
cd first-react-app
npm install
```

以下のコマンドを実行して、ローカルでサーバーを起動します。

```bash
npm run dev
```

これで、Reactのプロジェクトが起動し、ブラウザで確認することができます。

## JSX形式に慣れよう

JSXとは、JavaScriptの拡張構文です。

まずは、以下のコードを見てみましょう。

```jsx
function App() {
  return (
    <div>
      <h1>Hello, World!</h1>
    </div>
  );
}
```

一見するとHTMLのように見えますが、実際にはJavaScriptの中で使われる特別なマークアップ言語です。

```jsx
function App() {
    const name = "batra9";
  return (
    <div>
      <h1>Hello, I'm {name}</h1>
    </div>
  );
}
```

上記のように、JavaScriptの中で変数を使うことができます。

簡単に説明すると、`return`の中にHTMLのような記述を書くことができるみたいに思ってもらえれば大丈夫です。

## コンポーネントとは

Reactでは、UIをコンポーネントと呼ばれる部品に分割して作成します。

UIをコンポーネントに分割するとはどういうことでしょうか？

![コンポーネントの例](/images/blog/webken-9/component-separate.png)

### コンポーネントを分割してみよう

`App.css`と`index.css`のコードをいったん削除し、`App.js`を以下のように書き換えます。

```jsx:App.js
function Header() {
  return (
    <header>
      <h1>買い物リスト</h1>
    </header>
  )
}

function TodoList() {
  return (
    <ul>
      <li>パンを買う</li>
      <li>牛乳を買う</li>
      <li>バターを買う</li>
    </ul>
  )
}

function App() {
  return (
    <>
      <div>
        <Header />
        <TodoList />
        <p>残金は 2800 円です</p>
      </div>
    </>
  )
}

export default App
```

`Header`と`TodoList`というコンポーネントを作成しました。これで、`App`コンポーネントが見やすくなりました。

コンポーネントは別のファイルに分割し、`import`することもできます。これは後のコードで説明します。

## 仮想DOMとは

ここからちょっと技術的な話になりますが、Reactの特徴である仮想DOMについて説明します。

まず、仮想DOMの説明に入る前にDOMについて説明します。

### DOMとは

DOM(Document Object Model)とは、JavaScriptやCSSなどのプログラミング言語からHTMLなどのマークアップ言語にアクセスできるようにするためのAPIです。

ブラウザはサーバーから受け取ったHTMLをDOMに変換します。その時、HTMLの要素をノードとして扱い、ツリー構造にして管理します。

![DOMの例](/images/blog/webken-11/dom-tree-strucuture.png)

例えばボタンの文字を変えたり、色を変えたりするように要素の追加や変更を行うことを**DOM操作**といいます。

DOM操作はレンダリングと大きく関係しており、要素の変更を行うだけでもブラウザの再描画が発生します。

```mermaid
graph LR
    A[HTML] --> B[DOM]
    B --> C[レンダリング]
    C --> D[再描画]
```

### 仮想DOMとは

複雑なDOM操作を行ったり、要素を頻繁に更新したりすると、レンダリングに時間がかかってしまうことがあります。

その問題を解決するために、「仮想DOM」というものが生まれました。

仮想DOM(virtual DOM)は、メモリー上にDOMのコピーを用意し、実際にコンポーネントの変更があった場合にそのコピーとの差分を検出し、実際のDOMに反映するという仕組みです。

![仮想DOMの例](/images/blog/webken-11/virtual-dom.png)

仮想DOMは、差分がある部分だけを更新することでDOM操作を最小限に抑え、レンダリングにかかる時間を短くすることができます。

## useState

Reactでは、コンポーネントの状態を管理するために`useState`というフックを提供しています。

```jsx
import { useState } from "react"
```

このように記述することで、`useState`を使うことができます。

`useState`は、コンポーネントの状態を管理するためのフックであり、初期値を引数に取り、現在の状態とその状態を更新するための関数を返します。

```jsx
const [count, setCount] = useState(0) // 初期値は0
const [value, setValue] = useState('') // 初期値は空文字
```

### 状態管理の例

それでは、`App.js`に`useState`を使ってみましょう。

```jsx:App.js
import { useState } from "react"

function App() {
  const [value, setValue] = useState('')
  return (
    <>
      <div>
        <h1>Hello React!</h1>
        <button onClick={() => setValue('ボタンが押されました')}>表示</button>
        <p>{value}</p>
      </div>
    </>
  )
}

export default App
```

サーバーを起動して、ブラウザで確認してみましょう。

ボタンを押すと、文字が表示されることが確認できます。

### カウンターを作ってみよう

次に、`useState`を使ってカウンターを作ってみましょう。

(例) ボタンを用意し+ボタンを押すとカウンターが1ずつ増える、-ボタンを押すとカウンターが1ずつ減る...

:::details[サンプルコード]

```jsx:App.js
import { useState } from "react"

function App() {
  const [count, setCount] = useState(0)

  return (
    <>
      <div>
        <h1>カウンター</h1>
        <p>{count}</p>
        <button onClick={() => setCount(count - 1)}>-</button>
        <button onClick={() => setCount(count + 1)}>+</button>
        <button onClick={() => setCount(0)}>リセット</button>
      </div>
    </>
  )
}

export default App
```

:::

## ReactRouter
