---
title: "【第9回】データベース入門(2)"
description: "Webサーバーからデータベースを接続してみよう"
date: "2024-07-08"
authors: ["batora9"]
tags: ["Web研究会", "データベース", "SQL", "Webアプリケーション"]
prev: "./8"
---

## おさらい

### データベース

#### なぜデータベースが必要なのか

- データの永続化をしたい
- データの整合性を保ちたい
- データの検索を効率化したい

#### 別にファイルとして保存すればよくない？

- ファイルだとデータの整合性が取れない（多重書き込みなど）
  - DBはトランザクションという排他制御の仕組みを持っている
- データの検索がしにくい
  - DBはインデックスキーやハッシュテーブルといった比較的低オーダーの計算量で検索ができる仕組みを持っている
  - ファイルだと全てのデータを読み込んでから検索する必要がある

#### どんな種類があるの？

- リレーショナルデータベース（RDB）
  - ファイルベース
    - SQLite
  - サーバーベース
    - MySQL, PostgreSQL
- 他にも
  - Key-Value Store
    - Redis
    - Cloudflare Workers KV
  - Vector DB
  - Document Store
  - ...

#### どうやって使うの？

- 基本的にSQL（Structured Query Language）という言語を使って操作する
- データベースに接続するためのライブラリを使ってプログラムからSQLをDBに送って操作する

#### 何に使われてるの？

- Webアプリケーション
- ゲームサーバー
- ビックデータ解析
- スマホのデータ保存

少しでも「データ」を扱う場面であれば必ずと言っていいほどデータベースが使われています。
決してWebだけの技術というわけではありませんのでこの機会に慣れておくといいでしょう。

### SQL

#### SQLとは

- データベースを操作するための言語
- データの操作（追加、更新、削除、取得）ができる
- テーブルの作成や削除もできる

#### なぜSQLが必要なのか

サーバーはJavaScriptのほかに、GoやPythonなどの言語でも書くことができます。
例えば、JavaScriptでDBに直接命令ができたとしたら、他の言語で書かれたサーバーからはその命令を使うことはできませんよね？
つまり、データベースにアクセスし操作するための**共通の中間言語**が必要なのです。

今回は紹介しませんが、SQLを書かなくてもうまくデータベースを操作できるライブラリもありますが、裏側では基本的にはSQLが使われています。

#### SQLの基本

前回の講義で学習したSQL文を復習してみましょう。詳しくは[【第8回】データベース入門(1)](../8)を参照してください。

テーブル操作

- `CREATE TABLE`でテーブルを作成
- `DROP TABLE`でテーブルを削除

レコード操作

- `SELECT`でデータを取得
- `INSERT INTO`でデータを追加
- `UPDATE`でデータを更新
- `DELETE`でデータを削除

レコードの操作である、**CREATE**、**READ**、**UPDATE**、**DELETE**の頭文字を取って**CRUD**と呼ぶことがあります。

SQLが何をするかイメージしてみましょう。次のSQLは何をしそうだと思いますか？

```sql
CREATE TABLE users (
  id INT PRIMARY KEY,
  name TEXT,
  age INT
);
```

`CREATE TABLE`で`users`というテーブルを作成し、そのテーブルには`id`、`name`、`age`というカラムがあるんだなーくらいのイメージが湧いたらOKです。

次はどうでしょう？

```sql
SELECT * FROM users;
```

`users`テーブルから全てのデータを取得するんだなーくらいのイメージが湧いたらOKです。

最後にこれは？

```sql
INSERT INTO users (id, name, age) VALUES (1, 'Alice', 20);
```

`users`テーブルに`id`が`1`、`name`が`Alice`、`age`が`20`のデータを追加するんだなーくらいのイメージが湧いたらOKです。
